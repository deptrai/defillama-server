# DeFiLlama Production Environment Configuration
# This file contains environment variables for production deployment

# Environment
NODE_ENV=production

# Database Configuration (Production PostgreSQL)
TVL_CACHE_DB_CONFIG={"host":"defillama-postgres","port":5432,"user":"postgres","password":"${POSTGRES_PASSWORD}","db_name":"defillama","internalHost":"defillama-postgres"}
DEV_METRICS_DB_CONFIG={"host":"defillama-postgres","port":5432,"user":"postgres","password":"${POSTGRES_PASSWORD}","db_name":"defillama","internalHost":"defillama-postgres"}
ACCOUNTS_DB=postgresql://postgres:${POSTGRES_PASSWORD}@defillama-postgres:5432/defillama
ALERTS_DB=postgresql://postgres:${POSTGRES_PASSWORD}@defillama-postgres:5432/defillama
AGGREGATOR_DB_URL=postgresql://postgres:${POSTGRES_PASSWORD}@defillama-postgres:5432/defillama

# Redis Configuration (Production Redis)
REDIS_HOST=defillama-redis
REDIS_PORT=6379
REDIS_PASSWORD=${REDIS_PASSWORD}
REDIS_DB=0

# DynamoDB settings (Production - use PostgreSQL cache)
tableName=prod-table
AWS_REGION=eu-central-1

# API Configuration
API2_SUBPATH=api
API2_SKIP_SUBPATH=false
API2_CACHE_DIR=/app/.api2-cache
PORT=3000

# RPC endpoints for adapters (Production - use premium endpoints)
ETHEREUM_RPC=${ETHEREUM_RPC}
BSC_RPC=${BSC_RPC}
POLYGON_RPC=${POLYGON_RPC}
FANTOM_RPC=${FANTOM_RPC}
ARBITRUM_RPC=${ARBITRUM_RPC}
OPTIMISM_RPC=${OPTIMISM_RPC}
XDAI_RPC=${XDAI_RPC}
HARMONY_RPC=${HARMONY_RPC}
SOLANA_RPC=${SOLANA_RPC}
MOONRIVER_RPC=${MOONRIVER_RPC}
CRONOS_RPC=${CRONOS_RPC}

# Webhook Configuration (Production)
OUTDATED_WEBHOOK=${SLACK_WEBHOOK_URL}
SPIKE_WEBHOOK=${SLACK_WEBHOOK_URL}
DROPS_WEBHOOK=${SLACK_WEBHOOK_URL}
STALE_COINS_ADAPTERS_WEBHOOK=${SLACK_WEBHOOK_URL}
TEAM_WEBHOOK=${SLACK_WEBHOOK_URL}

# Storage Configuration (Production)
R2_ACCESS_KEY_ID=${R2_ACCESS_KEY_ID}
R2_SECRET_ACCESS_KEY=${R2_SECRET_ACCESS_KEY}
R2_ENDPOINT=${R2_ENDPOINT}

# API Keys (Production)
ALLIUM_API_KEY=${ALLIUM_API_KEY}
FLIPSIDE_API_KEY=${FLIPSIDE_API_KEY}
DEFILLAMA_API_KEY=${DEFILLAMA_API_KEY}
ETHERSCAN_API_KEY=${ETHERSCAN_API_KEY}

# Monitoring Configuration
PROMETHEUS_ENABLED=true
GRAFANA_ENABLED=true
LOKI_ENABLED=true
ALERTMANAGER_ENABLED=true

# Security Configuration
JWT_SECRET=${JWT_SECRET}
ANON_KEY=${ANON_KEY}
SERVICE_ROLE_KEY=${SERVICE_ROLE_KEY}

# Email Configuration (Production)
SMTP_HOST=${SMTP_HOST}
SMTP_PORT=${SMTP_PORT}
SMTP_USER=${SMTP_USER}
SMTP_PASSWORD=${SMTP_PASSWORD}
SMTP_FROM=${SMTP_FROM}

# Feature Flags
LLAMA_RUN_LOCAL=false
ENABLE_ALERTS=true
ENABLE_NOTIFICATIONS=true
ENABLE_CACHING=true
ENABLE_RATE_LIMITING=true

# Logging Configuration
LOG_LEVEL=warn
LOG_FORMAT=json

# Performance Configuration
MAX_OLD_SPACE_SIZE=8192
WORKER_THREADS=8

# High Availability Configuration
ENABLE_CLUSTERING=true
CLUSTER_SIZE=4

# Backup Configuration
ENABLE_AUTO_BACKUP=true
BACKUP_RETENTION_DAYS=30

# Security Headers
ENABLE_HSTS=true
ENABLE_CSP=true
ENABLE_CORS=true
CORS_ORIGIN=https://defillama.com

