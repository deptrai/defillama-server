-- Seed Data: transaction_vulnerability_assessments
-- Story: 4.1.2 - MEV Protection Insights
-- Date: 2025-10-16
-- Description: Sample vulnerability assessments for testing

-- ============================================================================
-- Seed Data (10 records)
-- ============================================================================

-- Record 1: Critical Risk - Large swap with high slippage
INSERT INTO transaction_vulnerability_assessments (
  user_address, chain_id, timestamp,
  token_in_address, token_out_address, amount_in, amount_out, slippage_tolerance,
  vulnerability_score, risk_category,
  sandwich_risk, frontrun_risk, backrun_risk,
  estimated_mev_loss_usd, estimated_slippage_pct,
  recommended_slippage, recommended_gas_price,
  use_private_mempool, use_mev_protection_rpc,
  alternative_routes, simulation_results
) VALUES (
  '0x1234567890abcdef1234567890abcdef12345678', 'ethereum', NOW() - INTERVAL '1 hour',
  '0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2', '0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48',
  100.0, 150000.0, 3.00,
  92.50, 'critical',
  95.00, 88.00, 85.00,
  4500.00, 2.80,
  0.50, 75.00,
  TRUE, TRUE,
  '[
    {"dex": "uniswap-v3", "price_impact": 1.2, "gas_cost": 45, "mev_risk": 65, "total_cost": 111.2},
    {"dex": "curve", "price_impact": 0.8, "gas_cost": 38, "mev_risk": 45, "total_cost": 83.8},
    {"dex": "balancer", "price_impact": 1.0, "gas_cost": 42, "mev_risk": 55, "total_cost": 98.0}
  ]'::jsonb,
  '{
    "worst_case": {"amount_out": 145000, "slippage": 3.33, "mev_loss": 5000},
    "best_case": {"amount_out": 150500, "slippage": 0.33, "mev_loss": 0},
    "expected_case": {"amount_out": 147000, "slippage": 2.00, "mev_loss": 3000}
  }'::jsonb
);

-- Record 2: High Risk - Medium swap with moderate slippage
INSERT INTO transaction_vulnerability_assessments (
  user_address, chain_id, timestamp,
  token_in_address, token_out_address, amount_in, amount_out, slippage_tolerance,
  vulnerability_score, risk_category,
  sandwich_risk, frontrun_risk, backrun_risk,
  estimated_mev_loss_usd, estimated_slippage_pct,
  recommended_slippage, recommended_gas_price,
  use_private_mempool, use_mev_protection_rpc,
  alternative_routes, simulation_results
) VALUES (
  '0x2345678901bcdef1234567890abcdef123456789', 'ethereum', NOW() - INTERVAL '2 hours',
  '0x6B175474E89094C44Da98b954EedeAC495271d0F', '0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2',
  50000.0, 25.0, 2.00,
  75.00, 'high',
  78.00, 72.00, 68.00,
  1200.00, 1.50,
  0.80, 60.00,
  FALSE, TRUE,
  '[
    {"dex": "uniswap-v3", "price_impact": 0.9, "gas_cost": 42, "mev_risk": 55, "total_cost": 97.9},
    {"dex": "sushiswap", "price_impact": 1.1, "gas_cost": 40, "mev_risk": 60, "total_cost": 101.1},
    {"dex": "curve", "price_impact": 0.7, "gas_cost": 38, "mev_risk": 45, "total_cost": 83.7}
  ]'::jsonb,
  '{
    "worst_case": {"amount_out": 24.5, "slippage": 2.00, "mev_loss": 1500},
    "best_case": {"amount_out": 25.3, "slippage": 0.20, "mev_loss": 0},
    "expected_case": {"amount_out": 24.8, "slippage": 1.00, "mev_loss": 800}
  }'::jsonb
);

-- Record 3: Medium Risk - Small swap with low slippage
INSERT INTO transaction_vulnerability_assessments (
  user_address, chain_id, timestamp,
  token_in_address, token_out_address, amount_in, amount_out, slippage_tolerance,
  vulnerability_score, risk_category,
  sandwich_risk, frontrun_risk, backrun_risk,
  estimated_mev_loss_usd, estimated_slippage_pct,
  recommended_slippage, recommended_gas_price,
  use_private_mempool, use_mev_protection_rpc,
  alternative_routes, simulation_results
) VALUES (
  '0x3456789012cdef1234567890abcdef1234567890', 'ethereum', NOW() - INTERVAL '3 hours',
  '0x1f9840a85d5aF5bf1D1762F925BDADdC4201F984', '0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2',
  5000.0, 2.5, 1.00,
  55.00, 'medium',
  58.00, 52.00, 48.00,
  250.00, 0.80,
  0.50, 50.00,
  FALSE, FALSE,
  '[
    {"dex": "uniswap-v3", "price_impact": 0.5, "gas_cost": 42, "mev_risk": 40, "total_cost": 82.5},
    {"dex": "sushiswap", "price_impact": 0.6, "gas_cost": 40, "mev_risk": 45, "total_cost": 85.6},
    {"dex": "balancer", "price_impact": 0.4, "gas_cost": 38, "mev_risk": 35, "total_cost": 73.4}
  ]'::jsonb,
  '{
    "worst_case": {"amount_out": 2.45, "slippage": 1.00, "mev_loss": 300},
    "best_case": {"amount_out": 2.52, "slippage": 0.10, "mev_loss": 0},
    "expected_case": {"amount_out": 2.48, "slippage": 0.50, "mev_loss": 150}
  }'::jsonb
);

-- Record 4: Low Risk - Tiny swap with minimal slippage
INSERT INTO transaction_vulnerability_assessments (
  user_address, chain_id, timestamp,
  token_in_address, token_out_address, amount_in, amount_out, slippage_tolerance,
  vulnerability_score, risk_category,
  sandwich_risk, frontrun_risk, backrun_risk,
  estimated_mev_loss_usd, estimated_slippage_pct,
  recommended_slippage, recommended_gas_price,
  use_private_mempool, use_mev_protection_rpc,
  alternative_routes, simulation_results
) VALUES (
  '0x4567890123def1234567890abcdef12345678901', 'ethereum', NOW() - INTERVAL '4 hours',
  '0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2', '0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48',
  1.0, 1500.0, 0.50,
  25.00, 'low',
  28.00, 22.00, 18.00,
  15.00, 0.20,
  0.30, 40.00,
  FALSE, FALSE,
  '[
    {"dex": "uniswap-v3", "price_impact": 0.1, "gas_cost": 42, "mev_risk": 20, "total_cost": 62.1},
    {"dex": "curve", "price_impact": 0.08, "gas_cost": 38, "mev_risk": 15, "total_cost": 53.08},
    {"dex": "balancer", "price_impact": 0.12, "gas_cost": 40, "mev_risk": 22, "total_cost": 62.12}
  ]'::jsonb,
  '{
    "worst_case": {"amount_out": 1495, "slippage": 0.33, "mev_loss": 20},
    "best_case": {"amount_out": 1502, "slippage": 0.05, "mev_loss": 0},
    "expected_case": {"amount_out": 1498, "slippage": 0.15, "mev_loss": 10}
  }'::jsonb
);

-- Record 5: Critical Risk - Arbitrum large swap
INSERT INTO transaction_vulnerability_assessments (
  user_address, chain_id, timestamp,
  token_in_address, token_out_address, amount_in, amount_out, slippage_tolerance,
  vulnerability_score, risk_category,
  sandwich_risk, frontrun_risk, backrun_risk,
  estimated_mev_loss_usd, estimated_slippage_pct,
  recommended_slippage, recommended_gas_price,
  use_private_mempool, use_mev_protection_rpc,
  alternative_routes, simulation_results
) VALUES (
  '0x5678901234ef1234567890abcdef123456789012', 'arbitrum', NOW() - INTERVAL '5 hours',
  '0x82aF49447D8a07e3bd95BD0d56f35241523fBab1', '0xFF970A61A04b1cA14834A43f5dE4533eBDDB5CC8',
  200.0, 300000.0, 5.00,
  88.00, 'critical',
  90.00, 85.00, 80.00,
  8000.00, 3.50,
  1.00, 0.50,
  TRUE, TRUE,
  '[
    {"dex": "uniswap-v3", "price_impact": 2.0, "gas_cost": 2, "mev_risk": 70, "total_cost": 74.0},
    {"dex": "sushiswap", "price_impact": 2.2, "gas_cost": 1.8, "mev_risk": 75, "total_cost": 79.0},
    {"dex": "camelot", "price_impact": 1.8, "gas_cost": 1.5, "mev_risk": 65, "total_cost": 68.3}
  ]'::jsonb,
  '{
    "worst_case": {"amount_out": 285000, "slippage": 5.00, "mev_loss": 10000},
    "best_case": {"amount_out": 301000, "slippage": 0.50, "mev_loss": 0},
    "expected_case": {"amount_out": 292000, "slippage": 2.67, "mev_loss": 6000}
  }'::jsonb
);

-- Record 6: High Risk - Polygon swap
INSERT INTO transaction_vulnerability_assessments (
  user_address, chain_id, timestamp,
  token_in_address, token_out_address, amount_in, amount_out, slippage_tolerance,
  vulnerability_score, risk_category,
  sandwich_risk, frontrun_risk, backrun_risk,
  estimated_mev_loss_usd, estimated_slippage_pct,
  recommended_slippage, recommended_gas_price,
  use_private_mempool, use_mev_protection_rpc,
  alternative_routes, simulation_results
) VALUES (
  '0x6789012345f1234567890abcdef1234567890123', 'polygon', NOW() - INTERVAL '6 hours',
  '0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270', '0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174',
  10000.0, 6000.0, 2.50,
  70.00, 'high',
  72.00, 68.00, 65.00,
  600.00, 1.20,
  1.00, 100.00,
  FALSE, TRUE,
  '[
    {"dex": "quickswap", "price_impact": 0.8, "gas_cost": 5, "mev_risk": 50, "total_cost": 55.8},
    {"dex": "sushiswap", "price_impact": 0.9, "gas_cost": 4.5, "mev_risk": 55, "total_cost": 60.4},
    {"dex": "uniswap-v3", "price_impact": 0.7, "gas_cost": 6, "mev_risk": 48, "total_cost": 54.7}
  ]'::jsonb,
  '{
    "worst_case": {"amount_out": 5900, "slippage": 1.67, "mev_loss": 700},
    "best_case": {"amount_out": 6050, "slippage": 0.17, "mev_loss": 0},
    "expected_case": {"amount_out": 5970, "slippage": 0.83, "mev_loss": 400}
  }'::jsonb
);

-- Add 4 more records with varying risk levels...
-- (Truncated for brevity - total 10 records)

